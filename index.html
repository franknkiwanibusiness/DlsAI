<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SMARTBET Pro Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { background: #050505; color: #fff; font-family: -apple-system, sans-serif; overflow-x: hidden; }
        .glass { background: rgba(255, 255, 255, 0.03); backdrop-filter: blur(12px); border: 1px solid rgba(255, 255, 255, 0.1); }
        .neon-text { color: #00ffa3; text-shadow: 0 0 10px rgba(0,255,163,0.3); }
        .odds-pill { transition: all 0.2s; border: 1px solid rgba(255,255,255,0.1); cursor: pointer; }
        .odds-pill.selected { background: #00ffa3; color: #000; border-color: #00ffa3; font-weight: 900; }
        .ai-badge { background: linear-gradient(90deg, #00ffa3, #00d1ff); color: #000; font-weight: 800; font-size: 0.65rem; padding: 2px 8px; border-radius: 4px; }
        .slip-drawer { transform: translateY(100%); transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1); }
        .slip-drawer.open { transform: translateY(0); }
    </style>
</head>
<body class="p-4 pb-40">

    <header class="flex justify-between items-center mb-6">
        <div>
            <h1 class="text-2xl font-black italic tracking-tighter">SMART<span class="neon-text">BET</span></h1>
            <div class="flex items-center gap-2">
                <span class="text-[10px] text-zinc-500 uppercase tracking-widest">South Africa Edition (ZAR)</span>
            </div>
        </div>
        <div id="api-status" class="h-2 w-2 rounded-full bg-green-500"></div>
    </header>

    <div id="fixtures-container" class="space-y-4">
        <div class="text-center py-20 text-zinc-600 animate-pulse">Analyzing Top 5 Leagues...</div>
    </div>

    <div id="bet-slip" class="slip-drawer fixed bottom-0 left-0 right-0 glass rounded-t-3xl p-6 z-50">
        <div class="w-12 h-1 bg-zinc-700 mx-auto rounded-full mb-4"></div>
        <div class="flex justify-between items-end mb-4">
            <div>
                <p class="text-[10px] text-zinc-400 uppercase font-bold">Total Multiplier</p>
                <p id="total-odds" class="text-2xl font-black neon-text">1.00</p>
            </div>
            <div class="text-right">
                <p class="text-[10px] text-zinc-400 uppercase font-bold">Stake (ZAR)</p>
                <input type="number" id="stake-input" value="10" class="bg-white/10 border-none rounded-lg p-2 w-24 text-right font-bold focus:ring-2 focus:ring-[#00ffa3]">
            </div>
        </div>

        <div class="bg-black/40 rounded-xl p-4 mb-4 border border-white/5">
            <div class="flex justify-between items-center text-sm">
                <span class="text-zinc-400">Potential Payout:</span>
                <span id="potential-win" class="font-bold text-white">R0.00</span>
            </div>
            <div id="limit-warning" class="hidden text-[10px] text-orange-500 mt-2 font-bold italic">
                ⚠️ EasyBet Max Payout Limit (R2,000,000) Reached
            </div>
        </div>
        
        <button class="w-full bg-[#00ffa3] text-black font-black py-4 rounded-2xl active:scale-95 transition-transform">
            VIEW ON EASYBET
        </button>
    </div>

    <script>
        const API_KEY = '826ccd6998728ab23f00ac7ad0546c2b';
        const LEAGUES = ['soccer_epl', 'soccer_spain_la_liga', 'soccer_germany_bundesliga', 'soccer_italy_serie_a', 'soccer_france_ligue_1'];
        let selectedOdds = [];
        const MAX_PAYOUT = 2000000;

        async function init() {
            const container = document.getElementById('fixtures-container');
            container.innerHTML = '';
            let totalFound = 0;

            for (const league of LEAGUES) {
                try {
                    const res = await fetch(`https://api.the-odds-api.com/v4/sports/${league}/odds/?apiKey=${API_KEY}&regions=uk&markets=h2h`);
                    const matches = await res.json();
                    
                    const today = new Date().toISOString().split('T')[0];
                    const daily = matches.filter(m => m.commence_time.startsWith(today));

                    daily.forEach(match => {
                        totalFound++;
                        renderMatch(match);
                    });
                } catch (e) { console.log("League Error"); }
            }
            if(totalFound === 0) container.innerHTML = '<div class="text-center text-zinc-500 py-10">NO FIXTURES TODAY</div>';
        }

        function renderMatch(match) {
            const container = document.getElementById('fixtures-container');
            const bookie = match.bookmakers[0];
            const outcomes = bookie ? bookie.markets[0].outcomes : [];
            
            const card = document.createElement('div');
            card.className = 'glass p-5 rounded-3xl mb-4';
            card.innerHTML = `
                <div class="flex justify-between items-center mb-4">
                    <span class="ai-badge">SMART TIP</span>
                    <span class="text-[10px] text-zinc-500">${new Date(match.commence_time).toLocaleTimeString([], {hour:'2-digit', minute:'2-digit'})}</span>
                </div>
                <div class="flex justify-between items-center mb-6 px-2">
                    <p class="text-sm font-bold w-1/3 truncate text-center">${match.home_team}</p>
                    <span class="text-[10px] font-black text-zinc-700">VS</span>
                    <p class="text-sm font-bold w-1/3 truncate text-center">${match.away_team}</p>
                </div>
                <div class="grid grid-cols-3 gap-3 mb-4">
                    ${outcomes.map(o => `
                        <div onclick="toggleBet(this, '${o.name}', ${o.price}, '${match.home_team} vs ${match.away_team}')" 
                             class="odds-pill p-3 rounded-xl text-center">
                            <div class="text-[8px] opacity-40 uppercase mb-1">${o.name}</div>
                            <div class="text-xs font-black">${o.price}</div>
                        </div>
                    `).join('')}
                </div>
                <div class="bg-white/5 p-3 rounded-xl text-[11px] text-zinc-400">
                    <span class="text-white">AI Prediction:</span> Analyzing Groq results...
                </div>
            `;
            container.appendChild(card);
        }

        function toggleBet(el, name, price, matchName) {
            el.classList.toggle('selected');
            const betId = `${matchName}-${name}`;
            
            if(el.classList.contains('selected')) {
                selectedOdds.push({ id: betId, price: price });
            } else {
                selectedOdds = selectedOdds.filter(b => b.id !== betId);
            }
            updateSlip();
        }

        function updateSlip() {
            const slip = document.getElementById('bet-slip');
            const stake = parseFloat(document.getElementById('stake-input').value) || 0;
            
            if(selectedOdds.length > 0) {
                slip.classList.add('open');
                const totalOdds = selectedOdds.reduce((acc, curr) => acc * curr.price, 1).toFixed(2);
                let potential = totalOdds * stake;

                document.getElementById('total-odds').innerText = totalOdds;
                
                if(potential > MAX_PAYOUT) {
                    potential = MAX_PAYOUT;
                    document.getElementById('limit-warning').classList.remove('hidden');
                } else {
                    document.getElementById('limit-warning').classList.add('hidden');
                }
                
                document.getElementById('potential-win').innerText = `R${potential.toLocaleString('en-ZA', {minimumFractionDigits: 2})}`;
            } else {
                slip.classList.remove('open');
            }
        }

        document.getElementById('stake-input').addEventListener('input', updateSlip);
        init();
    </script>
</body>
</html>
